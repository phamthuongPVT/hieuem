<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- N·∫øu c√≥ file CSS ri√™ng cho trang, v·∫´n gi·ªØ li√™n k·∫øt n√†y -->
  <link rel="stylesheet" href="love.css" />
  <title>‚ù§Ô∏èPh·∫°m Th∆∞·ªüng‚ù§Ô∏è</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" 
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" 
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    /* Th√™m background cho to√†n b·ªô trang */
    body {
      background: url('https://phamthuongpvt.github.io/no/image/l.gif') no-repeat center center fixed;

      background-size: cover;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }
    /* CSS cho hi·ªáu ·ª©ng loading c·ªè 3 l√° (c√≥ th·ªÉ gi·ªØ l·∫°i n·∫øu c·∫ßn) */
    .loadingShamrock {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    .shamrockAnimation {
      font-size: 50px;
      animation: spin 2s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    /* CSS cho ·∫£nh ban ƒë·∫ßu trong boxCar */
    .boxCar img {
      width: 40px; /* K√≠ch th∆∞·ªõc ƒë√£ ƒë∆∞·ª£c gi·∫£m xu·ªëng */
      margin: 0 10px;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- N·ªôi dung ch√≠nh c·ªßa trang -->
    <div class="formInput">
      <div class="boxHands">
        <div class="handsCat">
          <img src="../image/handsCat.png" alt="">
        </div>
        <h1>‚ù§Ô∏èY√™u Em‚ù§Ô∏è</h1>
      </div>
      <div class="boxSlider">
        <div class="listSlider">
          <div class="slider">
            <img src="../image/1.jpg" alt="">
          </div>
          <div class="slider">
            <img src="../image/2.jpg" alt="">
          </div>
        </div>
        <div class="left">
          <i class="fa-solid fa-chevron-left"></i>
        </div>
        <div class="right">
          <i class="fa-solid fa-chevron-right"></i>
        </div>
      </div>
      <div class="boxHandsInput">
        <div class="handsCatImgInput">
          <img src="../image/handsCat.png" alt="">
        </div>
        <input type="text" id="inputField" placeholder="Nh·∫≠p t√™n..." readonly>
      </div>
      <div class="buttonLove">
        <div class="cricleBtn"></div>
        <div class="button"></div>
      </div>
    </div>
    <div class="boxLine">
      <div class="boxCar">
        <!-- Ban ƒë·∫ßu ch·ª©a 6 ·∫£nh gif -->
        <img src="../image/mewmew.gif" alt="Gif 1">
        <img src="../image/mewmew.gif" alt="Gif 2">
        <img src="../image/mewmew.gif" alt="Gif 3">
        <img src="../image/mewmew.gif" alt="Gif 4">
        <img src="../image/mewmew.gif" alt="Gif 5">
        <img src="../image/mewmew.gif" alt="Gif 6">
        <img src="../image/mewmew.gif" alt="Gif 7">
        <img src="../image/mewmew.gif" alt="Gif 8">
        <img src="../image/mewmew.gif" alt="Gif 9">
        <img src="../image/mewmew.gif" alt="Gif 10">
        <img src="../image/mewmew.gif" alt="Gif 11">
        <img src="../image/mewmew.gif" alt="Gif 12">
        <img src="../image/mewmew.gif" alt="Gif 13">
        <img src="../image/mewmew.gif" alt="Gif 14">
        <img src="../image/mewmew.gif" alt="Gif 15">
        <img src="../image/heartAnimation.gif" alt="Gif 6">
      </div>
      <!-- ƒê√£ xo√° ph·∫ßn ground-line -->
    </div>
  </div>

  <!-- Hi·ªáu ·ª©ng loading ban ƒë·∫ßu (c√≥ th·ªÉ gi·ªØ l·∫°i ho·∫∑c xo√° n·∫øu kh√¥ng c·∫ßn) -->
  <div class="loadingShamrock">
    <div class="shamrockAnimation">
      ‚òòÔ∏è
    </div>
  </div>

  <div class="wrapperLetterForm">
    <div class="boxLetter">
      <i class="fa-solid fa-xmark"></i>
      <div class="formLetter">
        <div class="heartLetter">
          <div class="heartLetterItem"></div>
        </div>
        <div class="heartLetter">
          <div class="heartLetterItem"></div>
        </div>
        <div class="wrapperLetter">
          <div class="giftbox">
            <div class="img">
              <img src="../image/giftbox.png" alt="">
            </div>
          </div>
          <div class="textLetter">
            <h2></h2>
            <p class="contentLetter"></p>
            <div class="heartAnimation">
              <img src="../image/heartAnimation.gif" alt="">
            </div>
          </div>
          <div class="mewmew1">
            <img src="../image/mewmew.gif" alt="">
          </div>
          <div class="mewmew2">
            <img src="../image/mewmew.gif" alt="">
          </div>
        </div>
      </div>
      <div class="before"></div>
    </div>
  </div>

  <!-- C√°c script ph√≠a d∆∞·ªõi v·∫´n gi·ªØ nguy√™n c√°c hi·ªáu ·ª©ng ƒë√£ c√≥ -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
  <script>
    // C√°c h√†m x·ª≠ l√Ω hi·ªáu ·ª©ng ch·ªØ trong form th∆∞
    let indexText = 0;
    let textLetter = document.querySelector('.textLetter h2');
    const textLetterH2 = "G·ª≠i em!";
    let timoutTextLetter;
    function textCharLetter(){
      if (indexText < textLetterH2.length) {
        textLetter.textContent += textLetterH2[indexText];
        indexText++;
        setTimeout(textCharLetter, 10);
      }
      else{
        clearInterval(timoutTextLetter);
        setTimeout(()=>{
          funcTimeoutLetterContent();
        },500);
      }
    }
    function funcTimeoutLetter(){
      indexText = 0; 
      textLetter.textContent = ''; 
      clearInterval(timoutTextLetter);
      timoutTextLetter = setInterval(()=>{
        textCharLetter();
      }, 20);
    }

    let indexTextContent = 0;
    let textLetterContent = document.querySelector('.contentLetter');
    const textLetterP = "1 tu·∫ßn c√≥ 7 ng√†y. 1 ng√†y c√≥ 24 gi·ªù. 1 gi·ªù c√≥ 60 ph√∫t. 1 ph√∫t c√≥ 60 gi√¢y. Kh√¥ng c√≥ m·ªôt ng√†y ho·∫∑c gi·ªù m√† anh kh√¥ng nh·ªõ em. Kh√¥ng c√≥ gi√¢y ph√∫t n√†o m√† anh kh√¥ng nghƒ© ƒë·∫øn em. T√¢m h·ªìn v√† tr√°i tim anh tr√†n ng·∫≠p em. Nh·ªõ v√† y√™u em nhi·ªÅu l·∫Øm.";
    let timerId; 
    function textCharLetterContent() {
  if (indexTextContent < textLetterP.length) {
    textLetterContent.textContent += textLetterP.charAt(indexTextContent);
    indexTextContent++;
    timerId = setTimeout(textCharLetterContent, 10);
  }
}

function showLetterContent() {
  indexTextContent = 0;
  textLetterContent.textContent = "";
  clearTimeout(timerId);
  textCharLetterContent();
}

    $(window).on('load', function(event){
      $('body').removeClass('preloading');
      // Hi·ªáu ·ª©ng loading
      $('.loadingShamrock').delay(1000).fadeOut('fast');

      // X·ª≠ l√Ω g√µ ch·ªØ trong √¥ input
      const inputField = document.getElementById('inputField');
      const textToType = "T√™n G√¨ Nh·ªù..."; // thay ƒë·ªïi t√™n ng∆∞·ªùi y√™u c·ªßa b·∫°n
      const typingSpeed = 100; // milliseconds per character
      let charIndex = 0;
      function typeText() {
        if (charIndex < textToType.length) {
          inputField.value += textToType.charAt(charIndex);
          charIndex++;
          setTimeout(typeText, typingSpeed);
        }
        if(inputField.value.length == textToType.length){
          setTimeout(()=>{
            document.querySelector(".buttonLove").style.transform = "translateY(0%)";
            document.querySelector(".cricleBtn").style.transform = "scale(0.1)";
          },1000);
          setTimeout(()=>{
            document.querySelector(".cricleBtn").style.transform = "scale(1)";
            document.querySelector(".cricleBtn").innerHTML = "üíó";
          },2000);
          setTimeout(()=>{
            document.querySelector(".buttonLove").style.width = "120px";
            document.querySelector(".button").style.transform = "translateX(25px)";
          },2500);
          setTimeout(()=>{
            document.querySelector(".button").style.width = "calc(100% - 25px)";
            document.querySelector(".button").style.height = "10px";
          },3000);
          setTimeout(()=>{
            document.querySelector(".button").style.height = "30px";
          },3500);
          setTimeout(() => {
            let button = document.querySelector(".button");
            button.innerHTML = "Nh·∫≠n th∆∞";
            button.addEventListener("click", function () {
              button.style.transform = "scale(0.8)";
              setTimeout(() => {
                button.style.transform = "scale(10)";
                window.location.href = "https://phamthuongpvt.github.io/tesr/love/index2.html";

              }, 10000);
            });
          }, 4000);
        }
      }
      setTimeout(()=>{
        typeText();
      }, 11500);

      // X·ª≠ l√Ω m·ªü form th∆∞ t·ª´ c√°c ph·∫ßn t·ª≠ .letters khi click
      document.querySelector(".buttonLove").addEventListener("click", function(){
        let timeout = setInterval(()=>{
          var letters = document.createElement("div");
          letters.className = "letters";
          letters.innerHTML = '<img src="../image/letters.png" alt="">';
          document.querySelector("body").prepend(letters);
          let left = Math.floor(Math.random() * 100);
          let rotate = Math.floor(Math.random() * 360);
          letters.style.left = left + "%";
          letters.style.top = "-10%";
          letters.style.transform = `rotate(${rotate}deg)`;
          setTimeout(()=>{
            letters.style.top = "100%";
          },100);
          setTimeout(()=>{
            letters.remove();
          },11000);
          letters.addEventListener("click", function(e){
            e.stopPropagation();
            clearInterval(timeout);
            $(".wrapperLetterForm").fadeIn();
            funcTimeoutLetter();
          });
        },500);
      });

      // ƒê√≥ng form th∆∞ khi click n√∫t "x"
      document.querySelector(".fa-xmark").addEventListener("click", function(e){
        e.stopPropagation();
        $(".wrapperLetterForm").fadeOut();
        indexTextContent = 0;
        textLetterContent.textContent = '';
        clearInterval(timoutTextLetterContent);
      });

      // --- Chuy·ªÉn ·∫£nh ra ngo√†i v√† animate ch·∫°y quanh m√†n h√¨nh ---
      $('.boxCar img').each(function(){
        var $img = $(this);
        // Di chuy·ªÉn ·∫£nh ra ngo√†i container, append v√†o body
        $img.appendTo('body');
        // ƒê·∫∑t k√≠ch th∆∞·ªõc nh·ªè h∆°n
        $img.css("width", "50px");
        // ƒê·∫∑t v·ªã tr√≠ ban ƒë·∫ßu ng·∫´u nhi√™n
        $img.css({
          position: 'absolute',
          left: Math.random() * ($(window).width() - $img.width()),
          top: Math.random() * ($(window).height() - $img.height())
        });
        animateGif($img);
      });
    });

    // S·ª± ki·ªán global: khi click b·∫•t c·ª© ƒë√¢u (bao g·ªìm c·∫£ v√πng c·ªßa form) s·∫Ω ƒë√≥ng form th∆∞
    $(document).on("click", function(){
      if($(".wrapperLetterForm").is(":visible")){
        $(".wrapperLetterForm").fadeOut();
        indexTextContent = 0;
        textLetterContent.textContent = '';
        clearInterval(timoutTextLetterContent);
      }
    });

    // X·ª≠ l√Ω n√∫t chuy·ªÉn slider
    document.querySelector(".boxSlider .right").addEventListener("click", function(){
      var slider = document.querySelectorAll(".slider");
      document.querySelector(".listSlider").appendChild(slider[0]);
    });
    document.querySelector(".boxSlider .left").addEventListener("click", function(){
      var slider = document.querySelectorAll(".slider");
      document.querySelector(".listSlider").prepend(slider[slider.length -1]);
    });

    // H√†m animateGif: di chuy·ªÉn ·∫£nh ƒë·∫øn v·ªã tr√≠ ng·∫´u nhi√™n r·ªìi g·ªçi l·∫°i ƒë·ªá quy ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng ch·∫°y li√™n t·ª•c
    function animateGif($img) {
      var newLeft = Math.random() * ($(window).width() - $img.width());
      var newTop = Math.random() * ($(window).height() - $img.height());
      var duration = Math.random() * 5000 + 3000; // th·ªùi gian di chuy·ªÉn t·ª´ 3000ms ƒë·∫øn 8000ms
      $img.animate({ left: newLeft + 'px', top: newTop + 'px' }, duration, function(){
        animateGif($img);
      });
    }
    // M·∫£ng ch·ª©a c√°c th√¥ng ƒëi·ªáp th∆∞
const letterMessages = [
  "Ch√∫c em lu√¥n h·∫°nh ph√∫c v√† r·∫°ng r·ª° m·ªói ng√†y!",
  "Anh y√™u em, ch√∫c em c√≥ m·ªôt ng√†y tuy·ªát v·ªùi!",
  "M·ªói ph√∫t b√™n em l√† ni·ªÅm h·∫°nh ph√∫c v√¥ t·∫≠n c·ªßa anh!"
];

// H√†m t·∫°o hi·ªáu ·ª©ng g√µ ch·ªØ cho n·ªôi dung th∆∞ (ƒë·ªôc l·∫≠p, s·ª≠ d·ª•ng bi·∫øn c·ª•c b·ªô)
(function(){
  // M·∫£ng ch·ª©a c√°c th√¥ng ƒëi·ªáp th∆∞
  const letterMessages = [
    "Ch√∫c em lu√¥n h·∫°nh ph√∫c v√† r·∫°ng r·ª° m·ªói ng√†y!",
    "Anh y√™u em, ch√∫c em c√≥ m·ªôt ng√†y tuy·ªát v·ªùi!",
    "M·ªói ph√∫t b√™n em l√† ni·ªÅm h·∫°nh ph√∫c v√¥ t·∫≠n c·ªßa anh!"
  ];
  // Bi·∫øn theo d√µi ch·ªâ s·ªë th√¥ng ƒëi·ªáp hi·ªán t·∫°i (ƒë√≥ng g√≥i c·ª•c b·ªô)
  let currentLetterIndex = 0;
  
  // H√†m hi·ªÉn th·ªã n·ªôi dung th∆∞ theo hi·ªáu ·ª©ng g√µ ch·ªØ
  function showLetterContent(containerSelector) {
    const container = document.querySelector(containerSelector);
    container.textContent = "";
    let index = 0;
    const message = letterMessages[currentLetterIndex];
    function typeChar() {
      if(index < message.length) {
        container.textContent += message.charAt(index);
        index++;
        setTimeout(typeChar, 10);
      } else {
        // Sau khi ho√†n t·∫•t, c·∫≠p nh·∫≠t ch·ªâ s·ªë cho l·∫ßn m·ªü ti·∫øp theo
        currentLetterIndex = (currentLetterIndex + 1) % letterMessages.length;
      }
    }
    typeChar();
  }
  
  // G√°n s·ª± ki·ªán click cho ph·∫ßn t·ª≠ letter (b·∫°n c√≥ th·ªÉ g·ªçi khi t·∫°o ph·∫ßn t·ª≠ letter)
  // ·ªû ƒë√¢y, ta d√πng event delegation ƒë·ªÉ x·ª≠ l√Ω click tr√™n b·∫•t k·ª≥ ph·∫ßn t·ª≠ n√†o c√≥ class "letters"
  document.addEventListener("click", function(e) {
    const letterEl = e.target.closest(".letters");
    if(letterEl) {
      e.stopPropagation();
      // Xo√° t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ letter ƒëang hi·ªÉn th·ªã
      document.querySelectorAll(".letters").forEach(el => el.remove());
      // Hi·ªÉn th·ªã form th∆∞ (n·∫øu ch∆∞a hi·ªán)
      const formWrapper = document.querySelector(".wrapperLetterForm");
      if(formWrapper) {
        formWrapper.style.display = "block";
      }
      // B·∫Øt ƒë·∫ßu hi·ªáu ·ª©ng g√µ ch·ªØ cho n·ªôi dung th∆∞ (gi·∫£ s·ª≠ ph·∫ßn hi·ªÉn th·ªã th∆∞ c√≥ class .contentLetter)
      showLetterContent('.contentLetter');
    }
  });
})();

  </script>
</body>
</html>
